The "Pick Peaks" solution is extended to include search for bottoms and valleys.
Not a lot of code changes except adding a couple of states was necessary, as I'd hoped.
See tests in test/java/peaks/TestPeaks